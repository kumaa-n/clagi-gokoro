<% submit_label = local_assigns.fetch(:submit_label, "コメントを投稿する") %>

<%= render "shared/error_message", object: review_comment %>

<% song = local_assigns.fetch(:song, review_comment.review&.song) %>
<% review = local_assigns.fetch(:review, review_comment.review) %>

<% form_url = review_comment.persisted? ? review_comment_path(review_comment) : review_review_comments_path(review) %>
<%= form_with model: review_comment, url: form_url do |f| %>
  <div class="mb-4">
    <%= f.text_area :content,
                    class: "textarea textarea-bordered w-full h-32 resize-none",
                    placeholder: "コメントを入力してください" %>
  </div>
  <div class="flex justify-end gap-2">
    <% if local_assigns[:cancel_path].present? %>
      <% cancel_options = local_assigns[:cancel_options] || { class: "btn" } %>
      <%= link_to "キャンセル", cancel_path, cancel_options %>
    <% end %>
    <%= f.submit submit_label, class: "btn btn-primary text-base-100" %>
  </div>
<% end %>
