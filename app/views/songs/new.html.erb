<% breadcrumb :new_song %>
<%= content_for(:title, t(".title")) %>

<div class="flex-1 bg-base-200/50">
  <div class="pt-4 md:pt-6 mb-6">
    <div class="container mx-auto px-4">
      <%= render "shared/breadcrumbs" %>
    </div>
  </div>

  <div class="container mx-auto max-w-lg px-4 pb-8 md:pb-12 lg:pb-16">
    <div class="p-8 md:p-12 rounded-2xl w-full bg-white">
    <h2 class="text-3xl md:text-4xl font-serif font-medium text-center mb-8 md:mb-10 text-primary tracking-wide">
      新しい曲を追加
    </h2>

    <%= form_with model: @song, class: "space-y-2" do |f| %>
      <%= render "shared/error_message", object: f.object %>

      <div data-controller="char-counter" data-char-counter-min-value=1 data-char-counter-max-value=<%= Song::TITLE_MAX_LENGTH %>>
        <%= f.label :title, class: "font-serif font-medium text-primary text-base mb-2" %>
        <span class="text-xs text-error font-medium">*</span>
        <%= f.text_field :title, placeholder: "曲名を入力",
              class: "input input-bordered w-full bg-base-100/50 focus:bg-white",
              data: { char_counter_target: "input", action: "input->char-counter#updateCount focus->char-counter#markAsTouched" } %>
        <div class="text-right text-sm text-neutral/60 mt-1">
          <span data-char-counter-target="counter">0</span> / <%= Song::TITLE_MAX_LENGTH %>文字
        </div>
      </div>

      <div data-controller="char-counter" data-char-counter-max-value=<%= Song::COMPOSER_MAX_LENGTH %>>
        <%= f.label :composer, class: "font-serif font-medium text-primary text-base mb-2" %>
        <%= f.text_field :composer, placeholder: "作曲者を入力",
              class: "input input-bordered w-full bg-base-100/50 focus:bg-white",
              data: { char_counter_target: "input", action: "input->char-counter#updateCount focus->char-counter#markAsTouched" } %>
        <div class="text-right text-sm text-neutral/60 mt-1">
          <span data-char-counter-target="counter">0</span> / <%= Song::COMPOSER_MAX_LENGTH %>文字
        </div>
      </div>

      <div data-controller="char-counter" data-char-counter-max-value=<%= Song::ARRANGER_MAX_LENGTH %>>
        <%= f.label :arranger, class: "font-serif font-medium text-primary text-base mb-2" %>
        <%= f.text_field :arranger, placeholder: "編曲者を入力",
              class: "input input-bordered w-full bg-base-100/50 focus:bg-white",
              data: { char_counter_target: "input", action: "input->char-counter#updateCount focus->char-counter#markAsTouched" } %>
        <div class="text-right text-sm text-neutral/60 mt-1">
          <span data-char-counter-target="counter">0</span> / <%= Song::ARRANGER_MAX_LENGTH %>文字
        </div>
      </div>

      <div class="flex items-center gap-2 ml-1 my-2">
        <%= f.check_box :confirmation, class: "checkbox checkbox-sm checkbox-primary mt-0.5 rounded-md", required: true %>
        <%= f.label :confirmation, "曲が登録されていないことを確認しました", class: "text-neutral/80 text-sm cursor-pointer select-none" %>
      </div>

      <div class="flex flex-col gap-4 pt-4">
        <%= f.submit "曲追加", class: "btn btn-primary w-full shadow-md hover:shadow-lg transition-all hover:-translate-y-0.5 rounded-full" %>
        <%= link_to "キャンセル",
                    songs_path,
                    class: "btn btn-outline w-full rounded-full px-8" %>
      </div>
    <% end %>
    </div>
  </div>
</div>
