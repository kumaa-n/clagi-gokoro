<%= form_with url: songs_path, method: :get, class: "mb-8 bg-white rounded-xl p-6 border border-base-200/60" do |f| %>
  <div class="grid grid-cols-1 md:grid-cols-3 gap-4 mb-4">
    <%= render "songs/autocomplete_field",
               form: f,
               field_name: :title,
               label_text: "曲名",
               placeholder_text: "曲名で検索" %>

    <%= render "songs/autocomplete_field",
               form: f,
               field_name: :composer,
               label_text: "作曲者",
               placeholder_text: "作曲者名で検索" %>

    <%= render "songs/autocomplete_field",
               form: f,
               field_name: :arranger,
               label_text: "編曲者",
               placeholder_text: "編曲者名で検索" %>
  </div>

  <div class="mb-4"
       data-controller="tags"
       data-tags-whitelist-value="<%= ReviewTags::AVAILABLE_TAGS.to_json %>"
       data-tags-max-tags-value="<%= ReviewTags::MAX_TAGS_PER_REVIEW %>">
    <%= f.label :tags, "タグ（最大#{ReviewTags::MAX_TAGS_PER_REVIEW}個）", class: "font-serif font-medium text-primary text-base mb-2" %>
    <%= f.hidden_field :tags, value: @selected_tags.to_json %>
    <input type="text"
            name="tags_input"
            value="<%= @selected_tags.join(',') %>"
            placeholder="クリックしてタグを選択"
            class="input input-bordered w-full bg-base-50 focus:bg-white transition-colors"
            data-tags-target="input" />
  </div>

  <div class="flex gap-3">
    <%= f.submit "検索", class: "btn btn-primary rounded-full px-8 shadow-md hover:shadow-lg hover:-translate-y-0.5 transition-all" %>
    <%= link_to "クリア", songs_path, class: "btn btn-outline rounded-full px-8" %>
  </div>
<% end %>
